# å¯åˆ é™¤æ–‡ä»¶æ¸…å•

è¿™ä¸ªæ¸…å•åˆ—å‡ºäº†åœ¨éƒ¨ç½²ç”Ÿäº§ç¯å¢ƒæ—¶å¯ä»¥å®‰å…¨åˆ é™¤çš„æ–‡ä»¶,åˆ é™¤è¿™äº›æ–‡ä»¶ä¸ä¼šå½±å“åº”ç”¨çš„æ ¸å¿ƒåŠŸèƒ½ã€‚

## âœ… å¯ä»¥å®Œå…¨åˆ é™¤çš„ç›®å½•

### 1. extensions/ (æ•´ä¸ªç›®å½•)
```
extensions/
â”œâ”€â”€ _extension-model/
â”œâ”€â”€ EventPlayer/
â”œâ”€â”€ OrderRobotExtension/
â”œâ”€â”€ PersistOrderMetricsToDynamoDB/
â”œâ”€â”€ WaitTimes/
â”œâ”€â”€ README.md
â””â”€â”€ resources/
```
**è¯´æ˜**: è¿™äº›æ˜¯æ‰©å±•åŠŸèƒ½ç¤ºä¾‹,æ¼”ç¤ºå¦‚ä½•æ‰©å±•åº”ç”¨,ä¸å½±å“æ ¸å¿ƒåŠŸèƒ½

---

### 2. docs/ (æ•´ä¸ªç›®å½•)
```
docs/
â””â”€â”€ PULL_REQUEST_TEMPLATE.md
```
**è¯´æ˜**: å¼€æºé¡¹ç›®ç®¡ç†æ–‡æ¡£

---

### 3. æ‰€æœ‰ test/ å’Œ tests/ ç›®å½•
åœ¨ä»¥ä¸‹ä½ç½®çš„æµ‹è¯•ç›®å½•éƒ½å¯ä»¥åˆ é™¤:
- `backends/2-config-service/code/test/`
- `backends/6-publisher-service/code/test/`
- `backends/7-metrics-service/code/test/`
- `backends/9-validator/code/test/`
- `backends/8-order-journey/functions/GenerateHtml/tests/`

---

### 4. æ‰€æœ‰ events/ ç›®å½• (æµ‹è¯•äº‹ä»¶)
- `backends/4-order-processing/events/`
- `backends/9-validator/events/`
- `backends/8-order-journey/statemachine/testEvents/`

---

### 5. repo-resources/ ç›®å½•
- `backends/4-order-processing/repo-resources/`
  - åŒ…å«é¡¹ç›®æ–‡æ¡£ç”¨çš„å›¾ç‰‡,ä¸å½±å“è¿è¡Œ

---

## âœ… å¯ä»¥åˆ é™¤çš„å•ä¸ªæ–‡ä»¶

### æ ¹ç›®å½•æ–‡ä»¶
```
CODE_OF_CONDUCT.md          # è¡Œä¸ºå‡†åˆ™
CONTRIBUTING.md             # è´¡çŒ®æŒ‡å—
PUBLISHING.md               # å‘å¸ƒæŒ‡å—
```
**ä¿ç•™**: `README.md`, `LICENSE`, `.gitignore`

---

### æµ‹è¯•å’Œå¼€å‘æ–‡ä»¶
åœ¨ `backends/` å„ä¸ªæœåŠ¡ç›®å½•ä¸‹,ä»¥ä¸‹ç±»å‹çš„æ–‡ä»¶éƒ½å¯ä»¥åˆ é™¤:

```
localTest.js               # æœ¬åœ°æµ‹è¯•è„šæœ¬
testharness.js             # æµ‹è¯•å·¥å…·
testEvent.json             # æµ‹è¯•äº‹ä»¶æ•°æ®
env.json                   # ç¯å¢ƒé…ç½®(ä»…ç”¨äºæœ¬åœ°æµ‹è¯•)
```

**å…·ä½“æ–‡ä»¶**:
- `backends/1-counting-service/code/localTest.js`
- `backends/2-config-service/code/localTest.js`
- `backends/4-order-processing/functions/resumeWF/testharness.js`
- `backends/4-order-processing/functions/env.json`
- `backends/5-order-manager/robot/localTest.js`
- `backends/6-publisher-service/code/localTest.js`
- `backends/7-metrics-service/code/localTest.js`
- `backends/8-order-journey/functions/GenerateHtml/testharness.js`
- `backends/9-validator/code/localTest.js`

---

### æœºå™¨äººå’Œè„šæœ¬å·¥å…·
```
backends/5-order-manager/robot/          # æœºå™¨äººæµ‹è¯•è„šæœ¬(æ•´ä¸ªç›®å½•)
backends/scripts/stopRunningExecutions.js  # ç®¡ç†è„šæœ¬
```

---

### ç¤ºä¾‹å’Œä¸´æ—¶æ–‡ä»¶
```
backends/8-order-journey/functions/GenerateHtml/123456789.html  # ç¤ºä¾‹HTML
backends/8-order-journey/functions/GenerateHtml/test.html       # æµ‹è¯•HTML
backends/4-order-processing/functions/resumeWF/events/testEvent.json
```

---

### è¾“å‡ºå’Œå¯¼å‡ºæ–‡ä»¶
```
00-baseCore/output.yaml
00-baseCore/export.json
01-appCore/output.yaml
01-appCore/export.json
```
**è¯´æ˜**: è¿™äº›æ˜¯SAMéƒ¨ç½²ç”Ÿæˆçš„æ–‡ä»¶,å¯ä»¥é‡æ–°ç”Ÿæˆ

---

### READMEæ–‡æ¡£(å¯é€‰åˆ é™¤)
å¦‚æœä½ å·²ç»ç†Ÿæ‚‰å„ä¸ªæœåŠ¡,å¯ä»¥åˆ é™¤:
```
backends/4-order-processing/README.md
backends/8-order-journey/README.md
extensions/README.md
extensions/å„ä¸ªå­ç›®å½•çš„README.md
```
**å»ºè®®**: ä¿ç•™æ ¹ç›®å½•çš„ `README.md` å’Œ `é¡¹ç›®æ¶æ„åˆ†æ.md`

---

## âš ï¸ ç‰¹æ®ŠæœåŠ¡(å¯é€‰åˆ é™¤)

å¦‚æœä½ å¸Œæœ›æœ€å°åŒ–éƒ¨ç½²,ä»¥ä¸‹æ•´ä¸ªæœåŠ¡å¯ä»¥åˆ é™¤(ä¼šå¤±å»å¯¹åº”åŠŸèƒ½):

### 1. æŒ‡æ ‡æœåŠ¡ (å¯é€‰)
```
backends/7-metrics-service/  (æ•´ä¸ªç›®å½•)
```
**å½±å“**: ä¸ä¼šæ”¶é›†å’Œå‘å¸ƒä¸šåŠ¡æŒ‡æ ‡åˆ°CloudWatch

**åŒæ—¶éœ€è¦ä¿®æ”¹**: ä» `01-appCore/template.yaml` ä¸­æ³¨é‡Šæ‰æŒ‡æ ‡æœåŠ¡ç›¸å…³é…ç½®

---

### 2. è®¢å•æ—…ç¨‹æœåŠ¡ (å¯é€‰)
```
backends/8-order-journey/  (æ•´ä¸ªç›®å½•)
```
**å½±å“**: ä¸ä¼šç”Ÿæˆè®¢å•å¯è§†åŒ–æ—…ç¨‹é¡µé¢

**åŒæ—¶éœ€è¦ä¿®æ”¹**: ä» `01-appCore/template.yaml` ä¸­æ³¨é‡Šæ‰è®¢å•æ—…ç¨‹æœåŠ¡ç›¸å…³é…ç½®

---

## ğŸ“Š åˆ é™¤æ•ˆæœç»Ÿè®¡

åˆ é™¤ä¸Šè¿°æ‰€æœ‰éæ ¸å¿ƒæ–‡ä»¶å:

- **å¯åˆ é™¤çš„ç›®å½•**: çº¦10ä¸ªå®Œæ•´ç›®å½•
- **å¯åˆ é™¤çš„å•ä¸ªæ–‡ä»¶**: çº¦30-40ä¸ªæ–‡ä»¶
- **ä»£ç åº“å¤§å°å‡å°‘**: çº¦30-40%
- **æ ¸å¿ƒåŠŸèƒ½å½±å“**: æ— å½±å“

---

## ğŸ”§ åˆ é™¤å‘½ä»¤ç¤ºä¾‹

å¦‚æœä½ ä½¿ç”¨Git,å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ é™¤:

```bash
# åˆ é™¤æ‰©å±•åŠŸèƒ½
rm -rf extensions/

# åˆ é™¤æ–‡æ¡£ç›®å½•
rm -rf docs/

# åˆ é™¤å¼€æºé¡¹ç›®ç®¡ç†æ–‡ä»¶
rm CODE_OF_CONDUCT.md CONTRIBUTING.md PUBLISHING.md

# åˆ é™¤æµ‹è¯•æ–‡ä»¶
find backends/ -name "localTest.js" -delete
find backends/ -name "testharness.js" -delete
find backends/ -type d -name "test" -exec rm -rf {} +
find backends/ -type d -name "tests" -exec rm -rf {} +
find backends/ -type d -name "events" -exec rm -rf {} +

# åˆ é™¤repoèµ„æº
rm -rf backends/4-order-processing/repo-resources/

# åˆ é™¤æœºå™¨äººè„šæœ¬
rm -rf backends/5-order-manager/robot/
rm backends/scripts/stopRunningExecutions.js

# åˆ é™¤è¾“å‡ºæ–‡ä»¶
rm */output.yaml */export.json
```

**æ³¨æ„**: 
- æ‰§è¡Œåˆ é™¤å‰è¯·å…ˆå¤‡ä»½!
- å¦‚æœéœ€è¦ä¿ç•™æŸäº›æ–‡ä»¶,è¯·ä¿®æ”¹ä¸Šè¿°å‘½ä»¤
- åœ¨Windowsç³»ç»Ÿä¸Š,ä½¿ç”¨PowerShellæˆ–Git Bashæ‰§è¡Œ

---

## âœ… åˆ é™¤åçš„æœ€å°æ ¸å¿ƒç»“æ„

åˆ é™¤æ‰€æœ‰éæ ¸å¿ƒæ–‡ä»¶å,é¡¹ç›®ç»“æ„å¦‚ä¸‹:

```
serverless-coffee-main/
â”œâ”€â”€ README.md
â”œâ”€â”€ é¡¹ç›®æ¶æ„åˆ†æ.md
â”œâ”€â”€ LICENSE
â”‚
â”œâ”€â”€ 00-baseCore/
â”‚   â”œâ”€â”€ template.yaml
â”‚   â”œâ”€â”€ cognito-triggers/
â”‚   â”‚   â”œâ”€â”€ create-auth-challenge.js
â”‚   â”‚   â”œâ”€â”€ define-auth-challenge.js
â”‚   â”‚   â”œâ”€â”€ pre-sign-up.js
â”‚   â”‚   â”œâ”€â”€ verify-auth-challenge-response.js
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â””â”€â”€ GetIoTEndpoint.js
â”‚
â”œâ”€â”€ 01-appCore/
â”‚   â”œâ”€â”€ template.yaml
â”‚   â””â”€â”€ initDB/
â”‚       â”œâ”€â”€ app.js
â”‚       â”œâ”€â”€ initMenu.js
â”‚       â”œâ”€â”€ initMenuState.JSON
â”‚       â”œâ”€â”€ initCountingState.JSON
â”‚       â””â”€â”€ package.JSON
â”‚
â””â”€â”€ backends/
    â”œâ”€â”€ 1-counting-service/code/
    â”‚   â”œâ”€â”€ getOrderId.js
    â”‚   â”œâ”€â”€ resetOrderId.js
    â”‚   â””â”€â”€ package.json
    â”‚
    â”œâ”€â”€ 2-config-service/
    â”‚   â”œâ”€â”€ code/
    â”‚   â”‚   â”œâ”€â”€ configChanged.js
    â”‚   â”‚   â””â”€â”€ package.json
    â”‚   â””â”€â”€ RestAPIs/api.yaml
    â”‚
    â”œâ”€â”€ 4-order-processing/
    â”‚   â”œâ”€â”€ statemachine/op.asl.json
    â”‚   â”œâ”€â”€ functions/capacity/isCapacityAvailable.js
    â”‚   â””â”€â”€ api.yaml
    â”‚
    â”œâ”€â”€ 5-order-manager/
    â”‚   â”œâ”€â”€ statemachine/om.asl.json
    â”‚   â”œâ”€â”€ functions/
    â”‚   â”‚   â”œâ”€â”€ sanitize/app.js + package.json
    â”‚   â”‚   â”œâ”€â”€ workflowStarted/app.js + package.json
    â”‚   â”‚   â”œâ”€â”€ waitingCompletion/app.js + package.json
    â”‚   â”‚   â””â”€â”€ OrderTimedOut/app.js + package.json
    â”‚   â””â”€â”€ RestAPIs/api.yaml
    â”‚
    â”œâ”€â”€ 6-publisher-service/code/
    â”‚   â”œâ”€â”€ publishToIOT.js
    â”‚   â”œâ”€â”€ publishToIOTconfig.js
    â”‚   â”œâ”€â”€ publishToIOTuserTopic.js
    â”‚   â””â”€â”€ package.json
    â”‚
    â””â”€â”€ 9-validator/code/
        â”œâ”€â”€ getCode.js
        â”œâ”€â”€ verifyCode.js
        â”œâ”€â”€ ddb.js
        â””â”€â”€ package.json
```

è¿™å°±æ˜¯è¿è¡ŒServerlesspressoåº”ç”¨æ‰€éœ€çš„æœ€å°æ ¸å¿ƒæ–‡ä»¶é›†!

