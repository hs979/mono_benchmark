# å¿«é€Ÿå…¥é—¨æŒ‡å—

è¿™æ˜¯ä¸€ä¸ªç®€åŒ–çš„å¿«é€Ÿå…¥é—¨æŒ‡å—ï¼Œå¸®åŠ©æ‚¨å¿«é€Ÿå¯åŠ¨å’Œæµ‹è¯•Serverlesspressoå•ä½“åº”ç”¨ã€‚

## ç¬¬ä¸€æ­¥ï¼šå®‰è£…ä¾èµ–

```bash
cd monolith-app
npm install
```

## ç¬¬äºŒæ­¥ï¼šå¯åŠ¨åº”ç”¨

```bash
npm start
```

æ‚¨åº”è¯¥çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹çš„è¾“å‡ºï¼š

```
============================================================
ðŸš€ Serverlesspresso å•ä½“åº”ç”¨å·²å¯åŠ¨
============================================================
ðŸ“ æœåŠ¡åœ°å€: http://localhost:3000
â° å¯åŠ¨æ—¶é—´: 2024-01-01T00:00:00.000Z
============================================================

å¯ç”¨çš„APIç«¯ç‚¹:
  [Validator Service]
    GET  /qr-code          - ç”ŸæˆQRç 
    POST /qr-code          - éªŒè¯QRç å¹¶åˆ›å»ºè®¢å•
...
```

## ç¬¬ä¸‰æ­¥ï¼šè¿è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•

åœ¨**å¦ä¸€ä¸ªç»ˆç«¯çª—å£**ä¸­ï¼Œè¿è¡Œæµ‹è¯•è„šæœ¬ï¼š

```bash
npm test
```

æµ‹è¯•è„šæœ¬å°†è‡ªåŠ¨æ‰§è¡Œå®Œæ•´çš„è®¢å•å·¥ä½œæµï¼ŒåŒ…æ‹¬ï¼š
1. ç”ŸæˆQRç 
2. åˆ›å»ºè®¢å•
3. æäº¤è®¢å•è¯¦æƒ…
4. å’–å•¡å¸ˆè®¤é¢†è®¢å•
5. å®Œæˆè®¢å•

## æ‰‹åŠ¨æµ‹è¯•ç¤ºä¾‹

### 1. ç”ŸæˆQRç ï¼ˆç®¡ç†å‘˜ï¼‰

```bash
curl "http://localhost:3000/qr-code?eventId=ABC&admin=true"
```

**é¢„æœŸå“åº”**ï¼š
```json
{
  "bucket": {...},
  "qrCode": "A1B2C3D4E5",
  "message": "QRç ç”ŸæˆæˆåŠŸ"
}
```

### 2. éªŒè¯QRç åˆ›å»ºè®¢å•ï¼ˆå®¢æˆ·ï¼‰

å°†ä¸Šä¸€æ­¥è¿”å›žçš„qrCodeå€¼æ›¿æ¢åˆ°ä¸‹é¢çš„å‘½ä»¤ä¸­ï¼š

```bash
curl -X POST "http://localhost:3000/qr-code?eventId=ABC&token=A1B2C3D4E5&userId=customer1"
```

**é¢„æœŸå“åº”**ï¼š
```json
{
  "orderId": "xyz123abc",
  "message": "è®¢å•åˆ›å»ºæˆåŠŸ",
  "availableTokens": 9
}
```

### 3. æäº¤è®¢å•è¯¦æƒ…ï¼ˆå®¢æˆ·ï¼‰

å°†ä¸Šä¸€æ­¥è¿”å›žçš„orderIdæ›¿æ¢åˆ°ä¸‹é¢çš„å‘½ä»¤ä¸­ï¼š

```bash
curl -X PUT "http://localhost:3000/orders/xyz123abc?eventId=ABC" \
  -H "Content-Type: application/json" \
  -d '{
    "userId": "customer1",
    "drink": "Americano",
    "modifiers": ["Regular"]
  }'
```

**é¢„æœŸå“åº”**ï¼š
```json
{
  "message": "è®¢å•æäº¤æˆåŠŸ",
  "orderId": "xyz123abc"
}
```

### 4. æŸ¥çœ‹è®¢å•åˆ—è¡¨

```bash
curl "http://localhost:3000/orders?state=CREATED&eventId=ABC"
```

### 5. å’–å•¡å¸ˆè®¤é¢†è®¢å•

```bash
curl -X PUT "http://localhost:3000/orders/xyz123abc?action=make&eventId=ABC&userId=barista1"
```

### 6. å’–å•¡å¸ˆå®Œæˆè®¢å•

```bash
curl -X PUT "http://localhost:3000/orders/xyz123abc?action=complete&eventId=ABC"
```

## å¸¸è§é—®é¢˜

### Q: ç«¯å£3000å·²è¢«å ç”¨æ€Žä¹ˆåŠžï¼Ÿ

ä¿®æ”¹app.jsæ–‡ä»¶ï¼Œæˆ–è®¾ç½®çŽ¯å¢ƒå˜é‡ï¼š

```bash
PORT=8080 npm start
```

### Q: æ•°æ®ä¼šæŒä¹…åŒ–å—ï¼Ÿ

ä¸ä¼šã€‚å½“å‰ç‰ˆæœ¬ä½¿ç”¨å†…å­˜å­˜å‚¨ï¼Œé‡å¯åº”ç”¨åŽæ•°æ®ä¼šæ¸…ç©ºã€‚

### Q: å¦‚ä½•æŸ¥çœ‹æ‰€æœ‰è®¢å•ï¼Ÿ

```bash
curl "http://localhost:3000/orders?state=CREATED&eventId=ABC&maxItems=100"
```

### Q: å¦‚ä½•ä¿®æ”¹èœå•ï¼Ÿ

```bash
curl -X PUT "http://localhost:3000/config?eventId=ABC" \
  -H "Content-Type: application/json" \
  -d '{
    "menu": [...]
  }'
```

## ä¸‹ä¸€æ­¥

æŸ¥çœ‹å®Œæ•´çš„[README.md](./README.md)äº†è§£æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š
- å®Œæ•´çš„APIæ–‡æ¡£
- æ•°æ®ç»“æž„è¯´æ˜Ž
- æž¶æž„è®¾è®¡
- äº‹ä»¶ç³»ç»Ÿ
- æ•…éšœæŽ’æŸ¥

## éœ€è¦å¸®åŠ©ï¼Ÿ

1. æŸ¥çœ‹æŽ§åˆ¶å°æ—¥å¿—ï¼Œåº”ç”¨ä¼šæ‰“å°è¯¦ç»†çš„æ‰§è¡Œä¿¡æ¯
2. ç¡®ä¿æ‰€æœ‰ä¾èµ–å·²æ­£ç¡®å®‰è£…
3. æ£€æŸ¥Node.jsç‰ˆæœ¬æ˜¯å¦>=14.0

